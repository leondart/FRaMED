language: java

# Only run Travis for changes on the following branches.
branches:
  only:
  - master

# (Encrypted) GitHub OAuth token used for pushing the generated Javadoc to GH-Pages.
# The token generated by GitHub is encrypted using 'travis encrypt GH_TOKEN=<token>'.
env:
  global:
  - secure: "enQkA2kxPK0rJFflHKjYuVmFPNNfnz0p7pHIErFkgHTAv11gNc2aV6Ao912C0MR8N2IBptzIpoNJd0AXQ+u+/8ZrCpi6OIKDr6pKpBPbBb2ZI9mZv6rCXEyN1xqZ4KwVaHBU5ObOwJiXLAAClCxriGi1Xzeq/5TffNyEwIjWxG0="

# Navigate to the FRaMED parent build project before running "install" and "script" phase.
before_install:
- cd ORM/org.framed.orm.build/

# Install the application locally. Only print errors.
install:
- mvn install -Dmaven.javadoc.skip=true -B -q

# Run the tests and package the application. Only print errors.
script:
- mvn clean test package -B -q

# If the build was successful, try to publish the generated Javadoc to GitHub. 
# See the documentation of 'travis/push-javadoc-to-gh-pages.sh' for more details.
after_success:
- cd $TRAVIS_BUILD_DIR
- chmod -R 777 ./travis/push-javadoc-to-gh-pages.sh
- ./travis/push-javadoc-to-gh-pages.sh

